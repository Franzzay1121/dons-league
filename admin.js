const KEY='dons_admin_v1';let store=JSON.parse(localStorage.getItem(KEY)||'{"teams":[],"matches":[]}');const $=id=>document.getElementById(id);function save(){localStorage.setItem(KEY,JSON.stringify(store));render()}function render(){homeSel.innerHTML='';awaySel.innerHTML='';teamList.innerHTML='';store.teams.forEach(t=>{let o=document.createElement('option');o.value=t.name;o.text=t.name;homeSel.appendChild(o);awaySel.appendChild(o.cloneNode(true));let li=document.createElement('li');li.textContent=t.name;teamList.appendChild(li)});scheduled.innerHTML='';completed.innerHTML='';store.matches.forEach((m,i)=>{let div=document.createElement('div');div.textContent=m.home+' vs '+m.away+' '+(m.date||'');scheduled.appendChild(div)})}addTeamBtn.onclick=async()=>{let n=teamName.value.trim();if(!n)return;store.teams.push({name:n});save()};scheduleBtn.onclick=()=>{if(!homeSel.value||!awaySel.value)return;store.matches.push({home:homeSel.value,away:awaySel.value,date:matchDate.value,time:matchTime.value});save()};exportBtn.onclick=()=>{let blob=new Blob([JSON.stringify({teams:store.teams,matches:store.matches},null,2)],{type:'application/json'});let a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='data.json';a.click()};importFile.onchange=e=>{let f=e.target.files[0];if(!f)return;let r=new FileReader();r.onload=()=>{store=JSON.parse(r.result);save()};r.readAsText(f)};render();